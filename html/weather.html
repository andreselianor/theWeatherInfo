<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Weather Forecast | Weather Info</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='icon' type='icon' href='../media/icons/icon.svg'>
  <link rel='stylesheet' type='text/css' media='screen' href='../css/weather.css'>
</head>

<body>
  <my-header></my-header>

  <main>
    <div class="cards">
      <!-- Tiempo -->
      <div class="card" id="tomorrow">
        <h2>Mañana</h2>
        <div class="value">-- °C</div>
        <div class="info">Cargando...</div>
      </div>

      <div class="card" id="dayAfter">
        <h2>Pasado mañana</h2>
        <div class="value">-- °C</div>
        <div class="info">Cargando...</div>
      </div>

      <!-- Nuevas cards -->
      <div class="card" id="minTemp">
        <h2>Temp. mínima</h2>
        <div class="value">-- °C</div>
        <div class="info">Mañana</div>
      </div>

      <div class="card" id="maxTemp">
        <h2>Temp. máxima</h2>
        <div class="value">-- °C</div>
        <div class="info">Mañana</div>
      </div>

      <div class="card" id="wind">
        <h2>Viento máx.</h2>
        <div class="value">-- km/h</div>
        <div class="info">Mañana</div>
      </div>

      <div class="card" id="sun">
        <h2>Horas de sol</h2>
        <div class="value">-- h</div>
        <div class="info">Estimadas</div>
      </div>

      <div class="card" id="rain">
        <h2>Lluvia</h2>
        <div class="value">-- %</div>
        <div class="info">Probabilidad</div>
      </div>

      <!-- Previsión próximos días -->
      <div class="card" id="day3">
        <h2>Día +3</h2>
        <div class="value">-- °C</div>
        <div class="info">Mín: -- °C</div>
      </div>

      <div class="card" id="day4">
        <h2>Día +4</h2>
        <div class="value">-- °C</div>
        <div class="info">Mín: -- °C</div>
      </div>

      <div class="card" id="day5">
        <h2>Día +5</h2>
        <div class="value">-- °C</div>
        <div class="info">Mín: -- °C</div>
      </div>

      <div class="card" id="day6">
        <h2>Día +6</h2>
        <div class="value">-- °C</div>
        <div class="info">Mín: -- °C</div>
      </div>

      <div class="card" id="day7">
        <h2>Día +7</h2>
        <div class="value">-- °C</div>
        <div class="info">Mín: -- °C</div>
      </div>

      <div class="card" id="day8">
        <h2>Día +8</h2>
        <div class="value">-- °C</div>
        <div class="info">Mín: -- °C</div>
      </div>

      <div class="card" id="day9">
        <h2>Día +9</h2>
        <div class="value">-- °C</div>
        <div class="info">Mín: -- °C</div>
      </div>
    </div>

    <script>
      const url = "https://api.open-meteo.com/v1/forecast?latitude=38.3452&longitude=-0.4810&daily=temperature_2m_max,temperature_2m_min,windspeed_10m_max,precipitation_probability_max,sunshine_duration&timezone=Europe/Madrid";

      fetch(url)
        .then(response => response.json())
        .then(data => {
          const d = data.daily;

          // Cards principales
          document.querySelector("#tomorrow .value").textContent =
            `${d.temperature_2m_max[1]}°C`;
          document.querySelector("#tomorrow .info").textContent =
            `Mín: ${d.temperature_2m_min[1]}°C`;

          document.querySelector("#dayAfter .value").textContent =
            `${d.temperature_2m_max[2]}°C`;
          document.querySelector("#dayAfter .info").textContent =
            `Mín: ${d.temperature_2m_min[2]}°C`;

          // Cards adicionales
          document.querySelector("#minTemp .value").textContent =
            `${d.temperature_2m_min[1]}°C`;

          document.querySelector("#maxTemp .value").textContent =
            `${d.temperature_2m_max[1]}°C`;

          document.querySelector("#wind .value").textContent =
            `${d.windspeed_10m_max[1]} km/h`;

          document.querySelector("#sun .value").textContent =
            `${Math.round(d.sunshine_duration[1] / 3600)} h`;

          document.querySelector("#rain .value").textContent =
            `${d.precipitation_probability_max[1]} %`;

          // Cards previsión extendida
          for (let i = 3; i <= 9; i++) {
            const card = document.querySelector(`#day${i}`);
            if (!card) continue;

            card.querySelector(".value").textContent =
              `${d.temperature_2m_max[i]}°C`;

            card.querySelector(".info").textContent =
              `Mín: ${d.temperature_2m_min[i]}°C`;
          }
        })
        .catch(() => {
          document.querySelectorAll(".info").forEach(el => {
            el.textContent = "Error al cargar datos";
          });
        });
    </script>
  </main>

  <my-footer></my-footer>

  <script src='../js/weather.js'></script>
  <script src='../js/header.js'></script>
  <script src='../js/footer.js'></script>
</body>

</html>